(function(r,a,g,u,o){"use strict";const s="HideIgnoredMessages",S=u.findByName("RowManager"),m=u.findByProps("isIgnoredUser");let i=[];const c=function(n){return m.isIgnoredUser?.(n)};function E(n,l){let t={id:"",type:0,content:"",channel_id:l.id,author:{id:"",username:"",avatar:"",discriminator:"",publicFlags:0,avatarDecoration:null},attachments:[],embeds:[],mentions:[],mention_roles:[],pinned:!1,mention_everyone:!1,tts:!1,timestamp:"",edited_timestamp:null,flags:0,components:[]};return typeof n=="string"?t.content=n:t={...t,...n},t}const f=function(){try{const n=g.before("dispatch",a.FluxDispatcher,function(t){let[e]=t;if(e.type==="LOAD_MESSAGES_SUCCESS"&&(e.messages=e.messages.filter(function(d){return!c(d?.author?.id)})),e.type==="MESSAGE_CREATE"||e.type==="MESSAGE_UPDATE"){const d=e.message;c(d?.author?.id)&&(e.channelId="0")}});i.push(n);const l=g.before("generate",S.prototype,function(t){let[e]=t;c(e.message?.author?.id)&&(e.renderContentOnly=!0,e.message.content=null,e.message.reactions=[],e.message.canShowComponents=!1,e.rowType===2&&(e.roleStyle="",e.text="[Temp] Ignored message. Reloading should fix.",e.revealed=!1,e.content=[]))});i.push(l),o.logger.log(`${s} loaded.`)}catch(n){o.logger.error(`[${s} Error]`,n)}},p=function(){o.logger.log(`Loading ${s}...`);for(const n of["MESSAGE_CREATE","MESSAGE_UPDATE"])a.FluxDispatcher.dispatch({type:n,message:E("PLACEHOLDER",{id:"0"})});for(const n of["LOAD_MESSAGES","LOAD_MESSAGES_SUCCESS"])a.FluxDispatcher.dispatch({type:n,messages:[]});f()},h=function(){o.logger.log(`Unloading ${s}...`);for(const n of i)n();o.logger.log(`${s} unloaded.`)};return r.onLoad=p,r.onUnload=h,r})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta);
