(function(s,i,d,u,o){"use strict";const p=u.findByName("RowManager"),S=u.findByProps("RelationshipStore.isIgnored","isBlocked"),a="HideignoredMessages";function f(t,g){let n={id:"",type:0,content:"",channel_id:g.id,author:{id:"",username:"",avatar:"",discriminator:"",publicFlags:0,avatarDecoration:null},attachments:[],embeds:[],mentions:[],mention_roles:[],pinned:!1,mention_everyone:!1,tts:!1,timestamp:"",edited_timestamp:null,flags:0,components:[]};return typeof t=="string"?n.content=t:n={...n,...t},n}const l=function(t){return S.isBlocked(t)};let r=[];const h=function(){try{const t=d.before("dispatch",i.FluxDispatcher,function(n){let[e]=n;if(e.type==="LOAD_MESSAGES_SUCCESS"&&(e.messages=e.messages.filter(function(c){return!l(c?.author?.id)})),e.type==="MESSAGE_CREATE"||e.type==="MESSAGE_UPDATE"){let c=e.message;l(c?.author?.id)&&(e.channelId="0")}});r.push(t);const g=d.before("generate",p.prototype,function(n){let[e]=n;l(e.message?.author?.id)&&(e.renderContentOnly=!0,e.message.content=null,e.message.reactions=[],e.message.canShowComponents=!1,e.rowType===2&&(e.roleStyle="",e.text="[Temp] Blocked message. Reloading should fix.",e.revealed=!1,e.content=[]))});return r.push(g),o.logger.log(`${a} loaded.`),null}catch(t){o.logger.log(`[${a} Error]`,t)}};var m={onLoad:function(){o.logger.log(`Loading ${a}...`);for(let t of["MESSAGE_CREATE","MESSAGE_UPDATE"])o.logger.log(`Dispatching ${t} to enable action handler.`),i.FluxDispatcher.dispatch({type:t,message:f("PLACEHOLDER",{id:"0"})});for(let t of["LOAD_MESSAGES","LOAD_MESSAGES_SUCCESS"])o.logger.log(`Dispatching ${t} to enable action handler.`),i.FluxDispatcher.dispatch({type:t,messages:[]});h()},onUnload:function(){o.logger.log(`Unloading ${a}...`);for(let t of r)t();o.logger.log(`${a} unloaded.`)}};return s.default=m,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta);
